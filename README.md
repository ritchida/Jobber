# Jobber

Jobber is a Cassandra-backed job reporting service written in Go.

## Development

Jobber uses go-swagger to generate a client and server based on a resource definition file.  The file lives in api/swagger.yml.  To generate the client and server, as well as the Go structs used to serialize/deserialize to/fromt he REST API, run:

```bash
make generate
```
Successive runs of this command require that the swagger-generated files are removed with:
```bash
make clean
```
The server generated by go-swagger was used as the basis for the Jobber service, whose main function is in cmd/jobber/main.go.  As new APIs are added to the swagger doc and handlers are generated, their initialization must be manually added to the service configuration in cmd/jobber/restapi/configure_jobber.go.  By default, the server listens on 127.0.0.1:9090.  You can configure the host:port that the servier listens on by setting the following environment variable:
```bash
export JABBER_HOST=<host/ip of jabber server>
export JABBER_PORT=<port number of jabber server>
```

To run the integration tests you must have an instance of Cassandra running and publicly-accessible.
Once you have an instance/cluster running, set the CASSANDRA_CLUSTER_IPS environment variable:
```bash
export CASSANDRA_CLUSTER_IPS=<ip of cassandra node>
```
Then you can run the Cassandra integration tests:
```bash
go test github.com/ritchida/jobber/pkg/repository
```

